@page "/group/profile/{GroupName}"
@using Iwentys.Sdk
@using Iwentys.Endpoints.Sdk.Extensions

@inherits Iwentys.Endpoints.WebClient.Shared.DependencyInjectionPage

<h2>Group page: @GroupName</h2>

@if (_groupProfile is not null)
{
    <div class="container-fluid d-flex flex-row">
        <div class="col-md-6 d-flex flex-column">
            @if (_groupProfile.GroupAdmin is not null)
            {
                <NavLink class="nav-link" href=@LinkToStudentProfile(_groupProfile.GroupAdmin)>
                    <MudCard>
                        Староста: @_groupProfile.GroupAdmin.GetFullName()
                    </MudCard>
                </NavLink>
            }

            <MatH6>Students</MatH6>
            <MudNavMenu>
                @foreach (StudentInfoDto student in _groupProfile.Students.Where(s => s.Id != _groupProfile.GroupAdmin?.Id))
                {
                    <MudNavLink Href=@LinkToStudentProfile(student)>
                        @student.GetFullName()
                    </MudNavLink>
                }
            </MudNavMenu>
        </div>

        <div class="col-md-6 d-flex flex-column">
            <MatH6>Subjects</MatH6>
            <MudNavMenu>
                @foreach (SubjectProfileDto subject in _groupProfile.Subjects)
                {
                    <MudNavLink Href=@LinkToSubjectProfile(subject)>
                        @subject.Name
                    </MudNavLink>
                }
            </MudNavMenu>
        </div>
    </div>
}

@code {
    [Parameter]
    public string GroupName { get; set; }
}
