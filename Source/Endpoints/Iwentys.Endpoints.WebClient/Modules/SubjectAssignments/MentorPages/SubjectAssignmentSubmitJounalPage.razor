@page "/subject/assignment-management/{SubjectId:int}/submits"

@namespace Iwentys.Endpoints.WebClient.Modules.SubjectAssignments.MentorPages
@attribute [Authorize]

<MudContainer>
    <MudGrid>
        <MudItem xs="12" sm="12" md="12">
            <MudText Align="Align.Center" Typo="Typo.h4">Assignment submits</MudText>
            <MudText Align="Align.Left" Typo="Typo.body2">Click on row will navigate to submit page</MudText>
        </MudItem>

        @if (_subjectAssignmentSubmits is not null)
        {
            <MudItem xs="12" sm="12" md="12">
                <MudTable T="SubjectAssignmentSubmitDto"
                      Items="@_subjectAssignmentSubmits"
                      OnRowClick="@(arg => OnRowClicked(arg))"
                      class="dark-elevation-01">
                    <HeaderContent>
                        <MudTh>Assignment</MudTh>
                        <MudTh>Student</MudTh>
                        <MudTh>Submit time</MudTh>
                        <MudTh>State</MudTh>
                        <MudTh>Approve time</MudTh>
                        <MudTh>Reject time</MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd Class="clickable">@context.SubjectAssignmentTitle</MudTd>
                        <MudTd Class="clickable">@context.Student.GetFullName()</MudTd>
                        <MudTd Class="clickable">@context.SubmitTimeUtc</MudTd>
                        <MudTd Class="clickable">@context.State</MudTd>
                        <MudTd Class="clickable">@context.ApproveTimeUtc</MudTd>
                        <MudTd Class="clickable">@context.RejectTimeUtc</MudTd>
                    </RowTemplate>
                </MudTable>
            </MudItem>
        }

    </MudGrid>
</MudContainer>

@code {
    [Parameter]
    public int SubjectId { get; set; }

    private void OnRowClicked(TableRowClickEventArgs<SubjectAssignmentSubmitDto> obj)
    {
        _navigationManager.NavigateTo($"/subject/{SubjectId}/management/assignments/submits/{obj.Item.Id}");
    }
}